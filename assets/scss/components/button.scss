@use "sass:color";
@use "../variables/index.scss" as *;
@use "../utilities/index.scss" as *;

// Base button styles
%button-base {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  @include gap(2);
  @include border-radius(1.5);
  outline: none;
  flex-shrink: 0;
  white-space: nowrap;
  transition: all 0.2s ease;

  &:disabled {
    pointer-events: none;
    opacity: 0.5;
  }

  &:focus-visible {
    border: 1px solid $ring;
    @include ring(3px, color.change($ring, $alpha: 0.5));
  }

  svg {
    width: $spacing * 4;
    height: $spacing * 4;
    flex-shrink: 0;
    pointer-events: none;
  }
}

// Size variants
%button-sm {
  height: $spacing * 8;
  @include padding(3, "x");
  @include gap(1.5);

  &:has(> svg) {
    @include padding(2.5, "x");
  }
}

%button-md {
  height: $spacing * 9;
  @include padding(4, "x");
  @include padding(2, "y");
  @include gap(1.5);

  &:has(> svg) {
    @include padding(2.5, "x");
  }
}

%button-lg {
  height: $spacing * 10;
  @include padding(6, "x");

  &:has(> svg) {
    @include padding(4, "x");
  }
}

%button-icon {
  height: $spacing * 9;
  width: $spacing * 9;
  @include padding(0);
}

// Color variants
%button-primary {
  background-color: $primary;
  color: $primary-foreground;
  box-shadow: $shadow-xs;

  &:hover:not(:disabled) {
    background-color: color.change($primary, $alpha: 0.9);
  }
}

%button-secondary {
  background-color: $secondary;
  color: $secondary-foreground;
  box-shadow: $shadow-xs;

  &:hover:not(:disabled) {
    background-color: color.change($secondary, $alpha: 0.8);
  }
}

%button-ghost {
  background-color: transparent;

  &:hover:not(:disabled) {
    background-color: $accent;
    color: $accent-foreground;
  }
}

%button-error {
  background-color: $error;
  color: $color-white;
  box-shadow: $shadow-xs;

  &:hover:not(:disabled) {
    background-color: color.change($error, $alpha: 0.9);
  }

  &:focus-visible {
    @include ring(3px, color.change($error, $alpha: 0.2));
  }
}

%button-outline {
  border: 1px solid $border;
  background-color: $background;
  box-shadow: $shadow-xs;

  &:hover:not(:disabled) {
    background-color: $accent;
    color: $accent-foreground;
  }
}

// Button class combining base with variants
.button {
  @extend %button-base;

  &.sm {
    @extend %button-sm;
  }

  &.md {
    @extend %button-md;
  }

  &.lg {
    @extend %button-lg;
  }

  &.icon {
    @extend %button-icon;
  }

  &.primary {
    @extend %button-primary;
  }

  &.secondary {
    @extend %button-secondary;
  }

  &.ghost {
    @extend %button-ghost;
  }

  &.error {
    @extend %button-error;
  }

  &.outline {
    @extend %button-outline;
  }
}

// Link button variant
a.button {
  color: $primary;
  text-decoration: none;

  &:hover:not(:disabled) {
    text-decoration: underline;
    text-underline-offset: 4px;
  }
}

// Default button element styles
button {
  @extend .button;
  @extend %button-md;
}
